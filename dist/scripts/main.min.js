console.log("this is index");var wd=wd||{};wd.login=wd.login||{};var warnings=$(".warning");wd.login.init=function(){$(".submit-form").submit(function(){return!1}),document.onkeydown=function(n){var i=window.event||n,t=i.keyCode||i.which;13==t&&$("#login-btn").click()},$("#login-btn").click(function(n){return $(this).attr("disabled")?!1:void wd.login.doLogin()}),$(".login-github").click(function(n){wd.login.doGithub()}),$(".login-coding").click(function(n){wd.login.doCoding()}),$(".login-weibo").click(function(n){wd.login.doWeibo()}),$(".email-input").focus(function(){warnings.eq(0).removeClass("warning-show"),$(this).removeClass("warning-border").addClass("input-focus")}).blur(function(){return $(this).removeClass("input-focus").removeClass("warning-border"),wd.util.validateEmail($(this).val())||""===$(this).val()?void 0:($(".warning").eq(0).text("请输入有效的 Email 地址").addClass("warning-show"),void $(".email-input").addClass("warning-border"))}),$(".password").focus(function(){warnings.eq(1).removeClass("warning-password-show"),$(this).removeClass("warning-border"),$(this).removeClass("warning-border")}).blur(function(){$(this).removeClass("warning-border")})},wd.login.doLogin=function(){var n=$("input[name=email]").val(),i=$("input[name=password]").val(),t=$("#auto-login").prop("checked");if(!wd.util.validateEmail(n))return warnings.eq(0).text("请输入有效的Email地址").addClass("warning-show"),void $(".email-input").addClass("warning-border");if(!wd.util.validatePassword(i))return warnings.eq(1).text("请输入至少8位的字符作为密码").addClass("warning-password-show"),void $(".password").addClass("warning-border").show();var e=$("#next").val();null!=e&&""!=e||(e="/dashboard"),$("#login-btn").attr("disabled","true");var o=1e3,r=128,a=$("#sk").val(),s=$("#ck").val(),l=CryptoJS.lib.WordArray.random(16).toString(CryptoJS.enc.Hex),d=CryptoJS.lib.WordArray.random(16).toString(CryptoJS.enc.Hex),u=new AesUtil(r,o),c=u.encrypt(d,l,a,i),w={email:n,password:[s,d,l,c].join("."),autologin:t};$.ajax({url:"https://www.wilddog.com/account/login",type:"POST",data:w,cache:!1,timeout:3e4,dataType:"json",success:function(i,t,o){var r=i.code;0==r?("undefined"!=typeof mixpanel&&(mixpanel.identify(n),mixpanel.people.set({$email:n})),setTimeout(function(){window.location.href=e},500)):1==r&&($("#login-btn").removeAttr("disabled"),warnings.eq(1).text("Email或密码错误").addClass("warning-password-show"))},error:function(){$("#login-btn").removeAttr("disabled"),warnings.eq(1).text("Email或密码错误").addClass("warning-password-show")}})},wd.login.doGithub=function(){$("#login-btn").attr("disabled","true"),"undefined"!=typeof mixpanel&&mixpanel.track("login with github"),$.ajax({url:"/account/github/url",type:"GET",dataType:"json",success:function(n,i,t){var e=n.url;setTimeout(window.location=e,200)},error:function(){$("#login-btn").removeAttr("disabled")}})},wd.login.doCoding=function(){$("#login-btn").attr("disabled","true"),"undefined"!=typeof mixpanel&&mixpanel.track("login with coding"),$.ajax({url:"/account/coding/url",type:"GET",dataType:"json",success:function(n,i,t){var e=n.url;setTimeout(window.location=e,200)},error:function(){$("#login-btn").removeAttr("disabled")}})},wd.login.doWeibo=function(){$("#login-btn").attr("disabled","true"),"undefined"!=typeof mixpanel&&mixpanel.track("login with weibo"),$.ajax({url:"/account/weibo/url",type:"GET",dataType:"json",success:function(n,i,t){var e=n.url;setTimeout(window.location=e,200)},error:function(){$("#login-btn").removeAttr("disabled")}})},wd.util=wd.util||{},wd.util.validateEmail=function(n){return/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(n)},wd.util.validatePassword=function(n){return n.length>=8};var AesUtil=function(n,i){this.keySize=n/32,this.iterationCount=i};AesUtil.prototype.generateKey=function(n,i){return CryptoJS.PBKDF2(i,CryptoJS.enc.Hex.parse(n),{keySize:this.keySize,iterations:this.iterationCount})},AesUtil.prototype.encrypt=function(n,i,t,e){var o=this.generateKey(n,t),r=CryptoJS.AES.encrypt(e,o,{iv:CryptoJS.enc.Hex.parse(i)});return r.ciphertext.toString(CryptoJS.enc.Base64)},AesUtil.prototype.decrypt=function(n,i,t,e){var o=this.generateKey(n,t),r=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(e)}),a=CryptoJS.AES.decrypt(r,o,{iv:CryptoJS.enc.Hex.parse(i)});return a.toString(CryptoJS.enc.Utf8)},console.log("this is another js");